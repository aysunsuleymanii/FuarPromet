{% extends 'base.html' %}
{% load static i18n %}

{% block title %}{% trans "Home" %} - Fuar Promet{% endblock %}

{% block content %}

<div class="row justify-content-center slide-in">
    <div class="col-12 text-center mb-5 mt-5">
        <h1 class="display-4 fw-light text-dark" style="font-weight:400;">Where Quality Wood Meets</br> Timeless
            Furniture Design</h1>
    </div>
</div>

<!--<div class="container">-->
<!--    <div class="row">-->
<!--        <div class="col-4">-->
<!--             <img-->
<!--                src="{% static 'home2.png' %}"-->
<!--                alt="Main Image 2"-->
<!--                class="w-100 h-100"-->
<!--                style="object-fit: cover;"-->
<!--            >-->
<!--        </div>-->
<!--       <div class="col-8" style="min-height: 300px;">-->
<!--            <img-->
<!--                src="{% static 'home1.png' %}"-->
<!--                alt="Main Image"-->
<!--                class="w-100 h-100"-->
<!--                style="object-fit: cover;"-->
<!--            >-->
<!--        </div>-->
<!--    </div>-->
<!--</div>-->

<div class="container hero-slider">
    <div class="row">

        <!-- LEFT COLUMN -->
        <div class="col-4 col-12 slider-col">
            <div class="image-slider" data-slider="left">
                <img class="slide active" src="{% static 'home2.png' %}">
                <img class="slide" src="{% static 'home4.png' %}">
                <img class="slide" src="{% static 'home8.png' %}">

                <div class="dots"></div>
            </div>
        </div>

        <!-- RIGHT COLUMN -->
        <div class="col-8 col-12 slider-col">
            <div class="image-slider" data-slider="right">
                <img class="slide active" src="{% static 'home1.png' %}">
                <img class="slide" src="{% static 'home3.png' %}">
                <img class="slide" src="{% static 'home7.png' %}">

                <div class="dots"></div>
            </div>
        </div>

    </div>
</div>




<!-- BEST SELLERS -->
<div class="container my-5">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h1 class="display-6 fw-light">Best Sellers</h1>
        <a href="/products" class="text-decoration-none text-dark">View All</a>
    </div>

    <div class="best-seller-wrapper position-relative">
        <!-- PREV BUTTON -->
        <button class="slider-btn prev-btn">&#10094;</button>

        <!-- SLIDER -->
        <div class="best-seller-viewport">
            <div class="best-seller-track">
                {% for product in best_sellers %}
                <div class="best-seller-card">
                    <img src="{% static product.image %}" alt="{{ product.name }}">
                    <div class="product-overlay">
                        <span class="product-name">{{ product.name }}</span>
                    </div>
                </div>
            {% endfor %}
            </div>
        </div>

        <!-- NEXT BUTTON -->
        <button class="slider-btn next-btn">&#10095;</button>
    </div>
</div>




<!-- LOGO SCROLL DRAW -->
<!--<section class="logo-section">-->
<!--    <div class="logo-wrapper">-->
<!--        {% include "fuar_logo.svg" %}-->
<!--    </div>-->
<!--</section>-->




<div class="container">
    <div class="row justify-content-center"
         style="min-height:400px;">

        <div class="section-title-wrapper">
            <span class="line"></span>
            <h2 class="section-title">CUSTOM WOOD FINISHES</h2>
            <span class="line"></span>
        </div>

        <div class="panel-wrapper">
            <img src="/static/panel1.png" class="panel">
            <img src="/static/panel2.png" class="panel">
            <img src="/static/panel3.png" class="panel">
            <img src="/static/panel4.png" class="panel">
            <img src="/static/panel5.png" class="panel">
        </div>

    </div>
</div>


<div class="container design-section">
    <div class="row align-items-center">
        <div class="col-lg-4 col-md-5 image-col">
            <img
                src="{% static 'home-img4.png' %}"
                alt="Sophisticated Design"
                class="design-image"
            >
        </div>

        <div class="col-lg-8 col-md-7 text-col">
            <h2 class="design-title">Sophisticated & Timeless Design</h2>
            <p class="design-subtitle">
                A palette of refined materials for an elegant, modern aesthetic.
            </p>
        </div>
    </div>
</div>





<div class="container design-section design-section--reverse">
    <div class="row align-items-center">
        <div class="col-lg-8 col-md-7 text-col">
            <h2 class="design-title">
                Natural textures. <br> Balanced tones.
            </h2>
            <p class="design-subtitle">
                Designed for modern interiors that value quality and detail.
            </p>
        </div>

        <div class="col-lg-4 col-md-5 image-col">
            <img
                src="{% static 'home-img5.png' %}"
                alt="Material Palette"
                class="design-image design-image2"
            >
        </div>
    </div>
</div>





<section class="featured-section slide-in delay-2">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 mx-auto">
                <span class="section-eyebrow">Our Expertise</span>
                <h2 class="section-title">Signature Works</h2>
                <p class="section-subtitle">
                    Real applications of our panels, materials, and finishes in modern spaces.
                </p>
            </div>
        </div>
    </div>
</section>



<div class="reveal-section">
    <div class="image-block reveal">
        <img src="{% static 'overlay1.png' %}" alt="Image 1">
    </div>
</div>

<div class="reveal-section">
    <div class="empty-space" style="background-color: #ffffff"></div>
    <div class="image-block reveal">
        <img src="{% static 'overlay2.png' %}" alt="Image 2">
    </div>
</div>

<div class="reveal-section">
    <div class="image-block reveal">
        <img src="{% static 'overlay3.png' %}" alt="Image 3">
    </div>
</div>

{% block extra_js %}
<script>
    document.addEventListener("DOMContentLoaded", () => {
        const blocks = document.querySelectorAll(".reveal-section");

        const visibilityThreshold = 100;

        const revealOnScroll = () => {
            blocks.forEach(section => {
                const rect = section.getBoundingClientRect();
                if (rect.top < window.innerHeight - visibilityThreshold) {
                    section.classList.add("visible");
                }
            });
        };

        window.addEventListener("scroll", revealOnScroll);
        revealOnScroll();
    });


    document.addEventListener("DOMContentLoaded", () => {
    const track = document.querySelector(".best-seller-track");
    const prevBtn = document.querySelector(".prev-btn");
    const nextBtn = document.querySelector(".next-btn");

    let cards = Array.from(document.querySelectorAll(".best-seller-card"));
    const visibleCards = 4;
    let index = visibleCards; // start after prepended clones
    let isTransitioning = false;

    const cardWidth = () => cards[0].offsetWidth;

    /* ===== CLONE CARDS ===== */
    const firstClones = cards.slice(0, visibleCards).map(card => card.cloneNode(true));
    const lastClones = cards.slice(-visibleCards).map(card => card.cloneNode(true));

    lastClones.forEach(clone => track.prepend(clone));
    firstClones.forEach(clone => track.append(clone));

    cards = Array.from(document.querySelectorAll(".best-seller-card"));

    /* ===== INITIAL POSITION ===== */
    track.style.transform = `translateX(-${index * cardWidth()}px)`;

    function moveSlider() {
        track.style.transition = "transform 0.5s ease";
        track.style.transform = `translateX(-${index * cardWidth()}px)`;
    }

    nextBtn.addEventListener("click", () => {
        if (isTransitioning) return;
        isTransitioning = true;
        index++;
        moveSlider();
    });

    prevBtn.addEventListener("click", () => {
        if (isTransitioning) return;
        isTransitioning = true;
        index--;
        moveSlider();
    });

    track.addEventListener("transitionend", () => {
        isTransitioning = false;

        // Jump forward (end → start)
        if (index >= cards.length - visibleCards) {
            track.style.transition = "none";
            index = visibleCards;
            track.style.transform = `translateX(-${index * cardWidth()}px)`;
        }

        // Jump backward (start → end)
        if (index < visibleCards) {
            track.style.transition = "none";
            index = cards.length - (visibleCards * 2);
            track.style.transform = `translateX(-${index * cardWidth()}px)`;
        }
    });

    window.addEventListener("resize", () => {
        track.style.transition = "none";
        track.style.transform = `translateX(-${index * cardWidth()}px)`;
    });
});

    /* ================= LOGO DRAW SCROLL ================= */

    document.addEventListener("scroll", () => {
        const section = document.querySelector(".logo-section");
        const paths = document.querySelectorAll(".logo-wrapper path");

        if (!section || paths.length === 0) return;

        const rect = section.getBoundingClientRect();
        const windowHeight = window.innerHeight;

        let progress = 1 - (rect.bottom / (windowHeight * 1.2));
        progress = Math.max(0, Math.min(1, progress));

        paths.forEach(path => {
            const length = path.getTotalLength();
            path.style.strokeDasharray = length;
            path.style.strokeDashoffset = length * (1 - progress);
        });
    });


    const panels = [
        "/static/panel1.png",
        "/static/panel2.png",
        "/static/panel3.png",
        "/static/panel4.png",
        "/static/panel5.png"
    ];

    let index = 0;
    let rotation = 0;
    const img = document.getElementById("panelImage");

    setInterval(() => {
        rotation += 360;
        img.style.transform = `rotateY(${rotation}deg)`;

        setTimeout(() => {
            index = (index + 1) % panels.length;
            img.src = panels[index];
        }, 400); // change image halfway through rotation
    }, 2000); // change every 2 seconds



    const revealItems = document.querySelectorAll('.reveal');

    const observer = new IntersectionObserver(entries => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('visible');
            }
        });
    }, {
        threshold: 0.25
    });

    revealItems.forEach(el => observer.observe(el));





    document.querySelectorAll('.image-slider').forEach(slider => {
    const slides = slider.querySelectorAll('.slide');
    const dotsContainer = slider.querySelector('.dots');
    let index = 0;

    // Create dots
    slides.forEach((_, i) => {
        const dot = document.createElement('span');
        if (i === 0) dot.classList.add('active');
        dotsContainer.appendChild(dot);
    });

    const dots = dotsContainer.querySelectorAll('span');

    setInterval(() => {
        slides[index].classList.remove('active');
        dots[index].classList.remove('active');

        index = (index + 1) % slides.length;

        slides[index].classList.add('active');
        dots[index].classList.add('active');
    }, 1500);
});
</script>
{% endblock %}

{% endblock %}